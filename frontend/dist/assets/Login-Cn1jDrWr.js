import{u as y,r as d,b as N,j as e,N as E,q as k,s as L,t as S,v as D,i as x,c as g,L as f,w as I}from"./index-DdC0FHAS.js";const q=()=>{const j=y(),[a,b]=d.useState({email:"",password:""}),[n,l]=d.useState({}),[c,i]=d.useState({}),{error:C,isAuthenticated:w,loading:u}=N(r=>r.auth),m=(r,t)=>{let s="";switch(r){case"email":t.trim()?/\S+@\S+\.\S+/.test(t)||(s="Email is invalid"):s="Email is required";break;case"password":t.trim()||(s="Password is required");break}return s},h=r=>{const{name:t,value:s}=r.target;b({...a,[t]:s}),i({...c,[t]:!0})};d.useEffect(()=>{const r={};Object.keys(a).forEach(t=>{if(c[t]){const s=m(t,a[t]);s&&(r[t]=s)}}),l(r)},[a,c]);const _=async r=>{r.preventDefault();const t={};if(Object.keys(a).forEach(s=>{const o=m(s,a[s]);o&&(t[s]=o)}),Object.keys(t).length===0)try{await j(I(a)).unwrap()}catch(s){l(s&&typeof s=="object"?o=>({...o,...s,non_field_errors:s.non_field_errors||s.detail}):o=>({...o,non_field_errors:"An unexpected error occurred. Please try again."}))}else l(t),i(Object.keys(a).reduce((s,o)=>({...s,[o]:!0}),{}))},v=()=>{window.location.replace("https://accounts.google.com/o/oauth2/v2/auth?redirect_uri=http://localhost:3000/&prompt=consent&response_type=code&client_id=98030805900-5vua5pv5th620te46u3hoj7q5b6f4itq.apps.googleusercontent.com&scope=openid%20email%20profile&access_type=offline")};if(w)return e.jsx(E,{to:"/"});const p=r=>n[r]&&n[r].length>0;return e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx(k,{className:"w-2/3",children:e.jsxs(L,{children:[e.jsx(S,{className:"flex flex-col",children:e.jsx("h4",{className:" font-extrabold text-3xl",children:"Level Up"})}),e.jsx(D,{}),e.jsx("h3",{className:"text-default-500 text-center mb-1 font-bold text-2xl",children:"Login"}),n.non_field_errors&&e.jsx("p",{color:"error",className:"text-center mb-4 text-red-500",children:n.non_field_errors}),e.jsxs("form",{className:"mb-3",onSubmit:_,children:[e.jsx("div",{className:"mb-3",children:e.jsx(x,{name:"email",value:a.email,onChange:h,onBlur:()=>i({...c,email:!0}),type:"email",label:"Email",isInvalid:p("email"),errorMessage:n.email})}),e.jsx("div",{className:"mb-3",children:e.jsx(x,{name:"password",value:a.password,onChange:h,onBlur:()=>i({...c,password:!0}),type:"password",label:"Password",isInvalid:p("password"),errorMessage:n.password})}),e.jsx("div",{className:"d-grid gap-2 justify-center",children:e.jsx(g,{className:"btn-custom-green",size:"lg",type:"submit",disabled:u||Object.keys(n).length>0,children:u?"Logging in...":"Login"})})]}),e.jsx("div",{className:"d-grid gap-2 mt-2",children:e.jsx(g,{className:"btn-custom-blue",size:"lg",onClick:v,children:"Login With Google"})}),e.jsxs("p",{className:"text-center mt-4",children:["Don't have an account? ",e.jsx(f,{to:"../signup/",className:"text-blue-400",children:"Sign up"})]}),e.jsxs("p",{children:["Forgot your password? ",e.jsx(f,{to:"../reset/password/",className:"text-blue-400",children:"Reset Password"})]})]})})})},O=()=>e.jsx("div",{children:e.jsx(q,{})});export{O as default};
