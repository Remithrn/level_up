import{u as _,r as d,b as w,j as s,N as v,q as y,s as N,t as E,v as S,i as x,c as k,bV as L}from"./index-DdC0FHAS.js";const A=()=>{const g=_(),[t,j]=d.useState({email:"",password:""}),[o,l]=d.useState({}),[i,c]=d.useState({}),{error:M,isAuthenticated:p,loading:m}=w(a=>a.auth),u=(a,r)=>{let e="";switch(a){case"email":r.trim()?/\S+@\S+\.\S+/.test(r)||(e="Email is invalid"):e="Email is required";break;case"password":r.trim()||(e="Password is required");break}return e},h=a=>{const{name:r,value:e}=a.target;j({...t,[r]:e}),c({...i,[r]:!0})};d.useEffect(()=>{const a={};Object.keys(t).forEach(r=>{if(i[r]){const e=u(r,t[r]);e&&(a[r]=e)}}),l(a)},[t,i]);const b=async a=>{a.preventDefault();const r={};if(Object.keys(t).forEach(e=>{const n=u(e,t[e]);n&&(r[e]=n)}),Object.keys(r).length===0)try{await g(L(t)).unwrap()}catch(e){l(e&&typeof e=="object"?n=>({...n,...e,non_field_errors:e.non_field_errors||e.detail}):n=>({...n,non_field_errors:"An unexpected error occurred. Please try again."}))}else l(r),c(Object.keys(t).reduce((e,n)=>({...e,[n]:!0}),{}))};if(p)return s.jsx(v,{to:"/admin/dashboard"});const f=a=>o[a]&&o[a].length>0;return s.jsx("div",{className:"flex justify-center",children:s.jsx(y,{className:"w-2/3",children:s.jsxs(N,{children:[s.jsx(E,{className:"flex flex-col",children:s.jsx("h4",{className:"font-bold",children:"Level Up"})}),s.jsx(S,{}),s.jsx("h3",{className:"text-2xl text-default-500 text-center mb-1",children:"Admin Login"}),o.non_field_errors&&s.jsx("p",{color:"error",className:"text-center mb-4 text-red-500",children:o.non_field_errors}),s.jsxs("form",{className:"mb-3",onSubmit:b,children:[s.jsx("div",{className:"mb-3",children:s.jsx(x,{name:"email",value:t.email,onChange:h,onBlur:()=>c({...i,email:!0}),type:"email",label:"Email",isInvalid:f("email"),errorMessage:o.email})}),s.jsx("div",{className:"mb-3",children:s.jsx(x,{name:"password",value:t.password,onChange:h,onBlur:()=>c({...i,password:!0}),type:"password",label:"Password",isInvalid:f("password"),errorMessage:o.password})}),s.jsx("div",{className:"d-grid gap-2 justify-center",children:s.jsx(k,{className:"btn-custom-green",type:"submit",disabled:m||Object.keys(o).length>0,children:m?"Logging in...":"Login"})})]}),s.jsx("div",{className:"d-grid gap-2 mt-2"})]})})})};export{A as default};
